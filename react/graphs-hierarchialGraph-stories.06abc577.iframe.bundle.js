"use strict";(self.webpackChunkstorybook_react19=self.webpackChunkstorybook_react19||[]).push([[271],{"../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../packages/react/dist/graphs/node/RenderGraph/style.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".node-graph-tooltip::before {\n  content: '';\n  position: absolute;\n  top: -10px;\n  left: 16px;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent rgba(0, 0, 0, 0.8) transparent;\n}\n","",{version:3,sources:["webpack://./../../packages/react/dist/graphs/node/RenderGraph/style.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,kBAAkB;EAClB,UAAU;EACV,UAAU;EACV,iBAAiB;EACjB,iBAAiB;EACjB,mBAAmB;EACnB,oEAAoE;AACtE",sourcesContent:[".node-graph-tooltip::before {\n  content: '';\n  position: absolute;\n  top: -10px;\n  left: 16px;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: transparent transparent rgba(0, 0, 0, 0.8) transparent;\n}\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/graphs/hierarchialGraph.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CodeAndAccessibility:()=>CodeAndAccessibility,__namedExportsOrder:()=>__namedExportsOrder,default:()=>hierarchialGraph_stories});var react=__webpack_require__("../../node_modules/react/index.js"),grid=__webpack_require__("../../packages/react/dist/grid/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dagre=__webpack_require__("../../node_modules/@dagrejs/dagre/index.js"),dagre_default=__webpack_require__.n(dagre),src=__webpack_require__("../../node_modules/d3/src/index.js"),client=__webpack_require__("../../node_modules/react-dom/client.js"),injectStylesIntoStyleTag=__webpack_require__("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../../node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../../node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),style=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[6].use[1]!../../packages/react/dist/graphs/node/RenderGraph/style.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(style.A,options);style.A&&style.A.locals&&style.A.locals;const node_RenderGraph=({nodes,edges,direction,width,height,nodeRadius=80,initialAnimationDelay=650,defaultNodebackgroundColor="#61dafb",defaultFontSize=12,defaultFontColor="#1D1B1A",defaultEdgeColor="#555",defaultEdgeLabelColor="#555",defaultEdgeLabelHoverColor="#1c1c1c"})=>{const svgRef=(0,react.useRef)(null),tooltipRef=(0,react.useRef)(null);return(0,react.useEffect)((()=>{if(!svgRef.current)return;const svg=src.Ltv(svgRef.current);svg.selectAll("*").remove();const group=svg.append("g"),zoomBehavior=src.s_O().scaleExtent([.1,10]).on("start",(_event=>{svg.style("cursor","grabbing")})).on("zoom",(event=>{group.attr("transform",event.transform)})).on("end",(()=>{svg.style("cursor","default")}));svg.call(zoomBehavior);svg.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",defaultEdgeColor);const tooltipDiv=src.Ltv("body").append("div").attr("class","node-graph-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("background","rgba(0, 0, 0, 0.8)").style("color","#fff").style("border-radius","4px").style("font-size","14px").style("display","none").style("z-index","10999");tooltipRef.current=tooltipDiv;const edgeGroup=group.append("g").attr("class","edges");edgeGroup.selectAll("path.edge").data(edges).enter().append("path").attr("class","edge").attr("fill","none").attr("stroke",defaultEdgeColor).attr("stroke-width",1.5).attr("marker-end","url(#arrow)").on("mouseover",(function(_event,d){src.Ltv(this).attr("stroke",defaultEdgeColor).attr("stroke-width",2),labelGroup.selectAll("text.edge-label").filter((labelData=>labelData===d)).attr("fill",defaultEdgeLabelHoverColor).attr("font-weight","bold")})).on("mouseout",(function(_event,d){src.Ltv(this).attr("stroke",defaultEdgeColor).attr("stroke-width",1.5),labelGroup.selectAll("text.edge-label").filter((labelData=>labelData===d)).attr("fill",defaultEdgeLabelColor).attr("font-weight","normal")}));const labelGroup=group.append("g").attr("class","edge-labels"),edgeLabels=labelGroup.selectAll("text.edge-label").data(edges).enter().append("text").attr("class","edge-label").attr("text-anchor","middle").attr("fill",defaultEdgeLabelColor).attr("font-size",defaultFontSize).text((d=>d.label||"")),nodeGroups=group.append("g").selectAll(".node").data(nodes).enter().append("g").attr("class","node").attr("transform",(d=>`translate(${d.x},${d.y})`));function updateEdgePositions(){edgeGroup.selectAll("path.edge").attr("d",(d=>{const NodeEdgeData=d,sourceNode=nodes.find((n=>n.id===NodeEdgeData.source)),targetNode=nodes.find((n=>n.id===NodeEdgeData.target)),startPoint="horizontal"===direction?{x:sourceNode.x+nodeRadius/2,y:sourceNode.y}:{x:sourceNode.x,y:sourceNode.y+nodeRadius/2},endPoint="horizontal"===direction?{x:targetNode.x-nodeRadius/2,y:targetNode.y}:{x:targetNode.x,y:targetNode.y-nodeRadius/2},path=src.AeT(),curveOffset="horizontal"===direction?(endPoint.x-startPoint.x)/2:(endPoint.y-startPoint.y)/2;return path.moveTo(startPoint.x,startPoint.y),"horizontal"===direction?path.bezierCurveTo(startPoint.x+curveOffset,startPoint.y,endPoint.x-curveOffset,endPoint.y,endPoint.x,endPoint.y):path.bezierCurveTo(startPoint.x,startPoint.y+curveOffset,endPoint.x,endPoint.y-curveOffset,endPoint.x,endPoint.y),path.toString()})),edgeLabels.attr("x",(d=>{const sourceNode=nodes.find((n=>n.id===d.source)),targetNode=nodes.find((n=>n.id===d.target)),startPoint="horizontal"===direction?{x:sourceNode.x+nodeRadius/2,y:sourceNode.y}:{x:sourceNode.x,y:sourceNode.y+nodeRadius/2},endPoint="horizontal"===direction?{x:targetNode.x-nodeRadius/2,y:targetNode.y}:{x:targetNode.x,y:targetNode.y-nodeRadius/2};return(startPoint.x+endPoint.x)/2})).attr("y",(d=>{const sourceNode=nodes.find((n=>n.id===d.source)),targetNode=nodes.find((n=>n.id===d.target)),startPoint="horizontal"===direction?{x:sourceNode.x+nodeRadius/2,y:sourceNode.y}:{x:sourceNode.x,y:sourceNode.y+nodeRadius/2},endPoint="horizontal"===direction?{x:targetNode.x-nodeRadius/2,y:targetNode.y}:{x:targetNode.x,y:targetNode.y-nodeRadius/2};return(startPoint.y+endPoint.y)/2-5}))}nodeGroups.append("circle").attr("r",nodeRadius/2).attr("fill",(d=>d.nodeBackgroundColor||defaultNodebackgroundColor)),nodeGroups.each((function(d){if(d.sublabel){const foreignObject=src.Ltv(this).append("foreignObject").attr("x",-nodeRadius).attr("y",nodeRadius/2+5).attr("width",2*nodeRadius).attr("height","24px"),div=document.createElement("div");div.style.width="100%",div.style.height="100%",div.style.display="flex",div.style.justifyContent="center",(0,client.H)(div).render(d.sublabel),foreignObject.node()?.appendChild(div)}})),nodeGroups.append("foreignObject").attr("x",-nodeRadius/2).attr("y",-nodeRadius/2).attr("width",nodeRadius).attr("height",nodeRadius).each((function(d){if(d.label){const div=document.createElement("div");div.style.width="100%",div.style.height="100%",div.style.display="flex",div.style.justifyContent="center",div.style.alignItems="center",div.style.fontSize=`${defaultFontSize}px`,div.style.wordBreak="break-word",div.style.color=defaultFontColor,d.tooltip&&(div.onmouseover=()=>{tooltipDiv.style("display","block").html("");const container=document.createElement("div");(0,client.H)(container).render(d.tooltip),tooltipDiv.node()?.appendChild(container)},div.onmousemove=_event=>{const parentRect=this.getBoundingClientRect();tooltipDiv.style("left",`${parentRect.left+parentRect.width/4}px`).style("top",`${parentRect.top+parentRect.height/1.1}px`)},div.onmouseleave=()=>{tooltipDiv.style("display","none").html("")}),(0,client.H)(div).render(d.label),this.appendChild(div)}})),updateEdgePositions();const bbox=group.node().getBBox();let scale=Math.min(2*width/bbox.width,2*height/bbox.height);(scale>1||0===scale)&&(scale=1);const translateX=(width-bbox.width*scale)/2-bbox.x*scale,translateY=(height-bbox.height*scale)/2-bbox.y*scale,initialTransform=src.GSI.translate(translateX,translateY).scale(scale);group.transition().duration(initialAnimationDelay).attr("transform",initialTransform),setTimeout((()=>{svg.call(zoomBehavior.transform,initialTransform)}),initialAnimationDelay);const drag=src.$Er().on("start",(function(_event,_d){src.Ltv(this).raise().select("circle").attr("stroke","#000")})).on("drag",(function(event,d){d.x=event.x,d.y=event.y,src.Ltv(this).attr("transform",`translate(${d.x},${d.y})`),updateEdgePositions()})).on("end",(function(){src.Ltv(this).select("circle").attr("stroke",null)}));return nodeGroups.call(drag),()=>{tooltipDiv.remove()}}),[nodes,edges,direction]),(0,jsx_runtime.jsx)("svg",{ref:svgRef,width,height})};const HierarchialGraph=props=>{const{data,direction="horizontal",nodeRadius=80,...rest}=props,{ref:containerRef,size}=(()=>{const ref=(0,react.useRef)(null),[size,setSize]=(0,react.useState)({width:0,height:0});return(0,react.useEffect)((()=>{const element=ref.current;if(!element)return;const observer=new ResizeObserver((entries=>{for(const entry of entries){const{width,height}=entry.contentRect;setSize({width,height})}}));return observer.observe(element),()=>observer.disconnect()}),[]),{ref,size}})(),[nodes,setNodes]=(0,react.useState)([]),[graphId]=(0,react.useState)((()=>`hg-${Date.now()}-${Math.floor(1e3*Math.random())}`));return(0,react.useEffect)((()=>{const newGraph=function calculateLayout(data,direction,nodeRadius){const g=new(dagre_default().graphlib.Graph);return g.setGraph({rankdir:"horizontal"===direction?"LR":"TB",nodesep:70,ranksep:150}),g.setDefaultEdgeLabel((()=>({}))),data.nodes.forEach((node=>g.setNode(node.id,{width:nodeRadius,height:nodeRadius}))),data.edges.forEach((edge=>g.setEdge(edge.source,edge.target))),dagre_default().layout(g),g}(data,direction,nodeRadius),updatedNodes=data.nodes.map((node=>{const graphNode=newGraph.node(node.id);return{...node,x:graphNode.x,y:graphNode.y}}));setNodes(updatedNodes)}),[data,direction]),(0,jsx_runtime.jsx)("div",{ref:containerRef,id:graphId,style:{width:"100%",height:"400px"},children:!!nodes.length&&(0,jsx_runtime.jsx)(node_RenderGraph,{graphId,nodes,edges:data.edges,width:size.width,height:size.height,direction,...rest})})};var utils=__webpack_require__("./src/utils/index.ts");const hierarchialGraph_stories={title:"Graph/hierarchial graph",component:HierarchialGraph,parameters:{controls:{expanded:!0}},argTypes:{data:{description:"nodes and edges of type:`{` `nodes: {` `id: string;` `label: ReactNode;` `sublabel?: ReactNode;` `nodeBackgroundColor?: string;` `tooltip?: ReactNode;` `}[];`        `edges:  {` `source: string;` `target: string;` `label?: string; }[]`        `}`",control:!1},direction:{options:["horizontal","vertical"],description:"direction of the graph",table:{defaultValue:{summary:"horizontal"}},control:{type:"select"}},nodeRadius:{description:"radius of graph nodes",table:{defaultValue:{summary:"80"}},control:{type:"number"}},defaultFontSize:{description:"default font size within graph",table:{defaultValue:{summary:"12"}},control:{type:"number"}},defaultNodebackgroundColor:{description:"default node background color",table:{defaultValue:{summary:"61dafb"}},control:{type:"color"}},defaultFontColor:{description:"default node font color within graph",table:{defaultValue:{summary:"#61dafb"}},control:{type:"color"}},initialAnimationDelay:{description:"animation delay for scaling the graph",table:{defaultValue:{summary:"650"}},control:{type:"number"}},defaultEdgeColor:{description:"default edge line color",table:{defaultValue:{summary:"#555"}},control:{type:"color"}},defaultEdgeLabelColor:{description:"default edge label color",table:{defaultValue:{summary:"#555"}},control:{type:"color"}},defaultEdgeLabelHoverColor:{description:"default edge label hover color",table:{defaultValue:{summary:"#1c1c1c"}},control:{type:"color"}}}},CodeAndAccessibility=(args=>react.createElement(grid.E,{showSideMargin:!1},react.createElement(utils.Tx,{importStatement:"import { HierarchialGraph } from '@tiger-analytics/react/graphs';"}),react.createElement(grid.H,{style:{gap:"10px"}},react.createElement(HierarchialGraph,args)),react.createElement(grid.H,null,react.createElement("div",{className:"story-title"},"       ")),react.createElement(grid.H,null,react.createElement(utils.ur,{description:"A full page Loader component"})))).bind({});CodeAndAccessibility.args={data:{nodes:[{id:"1",label:"Parent",nodeBackgroundColor:"red",sublabel:"SUB",tooltip:"toltip"},{id:"2",label:"Child A"},{id:"3",label:"Child B"},{id:"4",label:"Grandchild"},{id:"5",label:"Parent B"}],edges:[{source:"1",target:"3",label:"has B"},{source:"1",target:"2",label:"has A"},{source:"2",target:"4",label:"leads to"},{source:"3",target:"4",label:"leads to"},{source:"5",target:"2",label:"has A"}]},direction:"horizontal",nodeRadius:80,initialAnimationDelay:650,defaultNodebackgroundColor:"#61dafb",defaultFontSize:12,defaultFontColor:"#1D1B1A",defaultEdgeColor:"#555",defaultEdgeLabelColor:"#555",defaultEdgeLabelHoverColor:"#1c1c1c"};const __namedExportsOrder=["CodeAndAccessibility"];CodeAndAccessibility.parameters={...CodeAndAccessibility.parameters,docs:{...CodeAndAccessibility.parameters?.docs,source:{originalSource:"args => {\n  return <GridContainer showSideMargin={false}>\n      <ImportBlock importStatement={`import { HierarchialGraph } from '@tiger-analytics/react/graphs';`} />\n      <GridColumn style={{\n      gap: '10px'\n    }}>\n        <HierarchialGraph {...args} />\n      </GridColumn>\n      <GridColumn>\n        <div className=\"story-title\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>\n      </GridColumn>\n      <GridColumn>\n        <DescriptionBlock description={description} />\n      </GridColumn>\n    </GridContainer>;\n}",...CodeAndAccessibility.parameters?.docs?.source}}}},"./src/utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{bO:()=>CommentBlock,ur:()=>DescriptionBlock,Tx:()=>ImportBlock});var grid=__webpack_require__("../../packages/react/dist/grid/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const ImportBlockDiv=styled_components_browser_esm.Ay.div`
  padding-bottom: 10px;
  border-bottom: 1px solid var(--colors-primary-base);
  margin-bottom: 10px;
  width: 100%;
`,ImportBlock=({importStatement})=>react.createElement(grid.H,null,react.createElement(ImportBlockDiv,null,importStatement));ImportBlock.__docgenInfo={description:"",methods:[],displayName:"ImportBlock",props:{importStatement:{required:!0,tsType:{name:"ReactNode"},description:""}}};const DescriptionBeforeSpacer=(0,styled_components_browser_esm.Ay)(grid.H)`
  border-bottom: 1px solid var(--colors-primary-base);
  font-weight: bold;
`,DescriptionContent=(0,styled_components_browser_esm.Ay)(grid.H)`
  font-size: 14px;
`,DescriptionBlock=({description})=>react.createElement(grid.E,{showSideMargin:!1},react.createElement(grid.H,null,react.createElement(DescriptionBeforeSpacer,null,"       ")),react.createElement(DescriptionContent,null,description));DescriptionBlock.__docgenInfo={description:"",methods:[],displayName:"DescriptionBlock",props:{description:{required:!0,tsType:{name:"ReactNode"},description:""}}};const CommentContainer=styled_components_browser_esm.Ay.div`
  width: 100%;
  font-size: 12px;
  color: var(--colors-success-base);
  display: flex;
  flex-wrap: wrap;
`,CommentBlock=({children})=>react.createElement(CommentContainer,null,children);CommentBlock.__docgenInfo={description:"",methods:[],displayName:"CommentBlock",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}}},"../../packages/react/dist/grid/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>GridColumn,E:()=>GridContainer});var styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const GridColumn=styled_components_browser_esm.Ay.div`
  grid-column: ${props=>`span ${props.sm||props.theme.grid.small.columns}`};
  display: ${props=>0===props.sm?"none":"flex"};
  flex-direction: column;
  align-items: 'flex-start';

  ${({theme,md,lg})=>styled_components_browser_esm.AH`
    @media screen and (min-width: ${`${theme.breakpoints.medium}`}) {
      grid-column: ${props=>`span ${md||lg||props.theme.grid.medium.columns}`};
      display: ${0===md?"none":"flex"};
    }

    @media screen and (min-width: ${`${theme.breakpoints.large}`}) {
      grid-column: ${props=>`span ${lg||props.theme.grid.large.columns}`};
      display: ${0===lg?"none":"flex"};
    }
  `}
`,GridContainer=styled_components_browser_esm.Ay.div`
  display: grid;
  width: 100%;
  grid-gap: ${({theme})=>theme.grid.small.gutter};
  grid-template-columns: repeat(${({theme})=>theme.grid.small.columns}, 1fr);
  grid-template-rows: initial;
  grid-auto-rows: initial;
  margin: 0;
  max-width: 100%;
  grid-column: span ${({theme})=>theme.grid.small.columns};

  ${({showSideMargin})=>showSideMargin&&styled_components_browser_esm.AH`
      max-width: calc(100% - ${({theme})=>theme.grid.small.margin} * 2);
      margin-left: ${({theme})=>theme.grid.small.margin} !important;
      margin-right: ${({theme})=>theme.grid.small.margin} !important;
    `}

  ${({restrictHeightToMaxContent})=>restrictHeightToMaxContent&&styled_components_browser_esm.AH`
      grid-template-rows: max-content;
      grid-auto-rows: max-content;
    `}

  @media screen and (min-width: 768px) {
    grid-template-columns: repeat(${({theme})=>theme.grid.medium.columns}, 1fr);
    margin: 0;
    grid-gap: ${({theme})=>theme.grid.medium.gutter};
    max-width: 100%;
    grid-column: span ${({theme})=>theme.grid.medium.columns};

    ${({showSideMargin})=>showSideMargin&&styled_components_browser_esm.AH`
        max-width: calc(100% - ${({theme})=>theme.grid.medium.margin} * 2);
        margin-left: ${({theme})=>theme.grid.medium.margin} !important;
        margin-right: ${({theme})=>theme.grid.medium.margin} !important;
      `}
  }

  @media screen and (min-width: 1200px) {
    grid-template-columns: repeat(${({theme})=>theme.grid.large.columns}, 1fr);
    margin: 0;
    grid-gap: ${({theme})=>theme.grid.large.gutter};
    grid-column: span ${({theme})=>theme.grid.large.columns};

    ${({showSideMargin})=>showSideMargin&&styled_components_browser_esm.AH`
        max-width: calc(100% - ${({theme})=>theme.grid.large.margin} * 2);
        margin-left: ${({theme})=>theme.grid.large.margin} !important;
        margin-right: ${({theme})=>theme.grid.large.margin} !important;
      `}
  }
`}}]);
//# sourceMappingURL=graphs-hierarchialGraph-stories.06abc577.iframe.bundle.js.map